<!DOCTYPE html>
<title>Traveller Map - Poster/POST Example</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="stylesheet" type="text/css" href="site.css?update=2013-07-29">
<script src="lib/polyfill/polyfill.js?update=2013-12-26"></script>
<script src="map.js?update=2013-12-27"></script>
<script src="post.js?update=2013-12-27"></script>

<h1>The Traveller Map - Poster/POST Example</h1>

<div class="content">
  <section>
    <h3>Explanation</h3>

    <p>
      The <b>Poster</b> API supports the HTTP POST method for submitting custom sector data for
      rendering. Three variations are supported:

    <ul>
      <li>POST Form Data
      <li>POST File Attachment
      <li>POST text/plain Content
    </ul>

    <h4>API URLs:</h4>
    <p class="code">http://travellermap.com/api/poster</p>

    <h4>Options:</h4>
    <dl class="params">
      <dt>scale <dd>scale in pixels/parsec (default is 64)
      <dt>subsector <dd>subsector index (A-P); if not specified, whole sector is rendered
      <dt>rotation <dd>rotate the image, 1 for 90&deg; clockwise, 2 for 180&deg;, 3 for 90&deg; counterclockwise
      <dt>options <dd><a href="doc/api.html#options">rendering options</a>
      <dt>style <dd><a href="doc/api.html#options">rendering style</a>
    </dl>

    <h4>Notes:</h4>

    <ul>
      <li>Image format depends on selected options ("Candy" produces JPEG, otherwise PNG)
      <li>If subsector is specified, only that subsector is rendered
      <li>Scale is pixels/parsec
    </ul>

  </section>

  <section>
    <h3>POST Form Data</h3>

    <ul>
      <li>POST with encoding type "application/x-www-form-urlencoded"
      <li>Sector data is specified as HTML form field "data"
      <li>Options specified in the URL query and/or POST variables
      <li>Metadata in <a href="doc/api.html#metadata">XML</a> (<a href="res/Sectors/FarFrontiers.xml">example</a>)
        or <a href="http://dotclue.org/t20/">MSEC</a> format may optionally be specified as an optional "metadata" field
    </ul>

    <p>Select a sector, or enter your own data below:
      <select id="sector">
        <option disabled>Select...</option>
      </select>
    </p>

    <form action="api/poster" method="post" enctype="application/x-www-form-urlencoded">
      <div>Sector Data:</div>
      <textarea id="data" name="data"
                style="width: 650px; height: 150px; white-space: pre;"
                spellcheck="false" wrap="off" cols="80" rows="10"></textarea>

      <div>Metadata:</div>
      <textarea id="metadata" name="metadata"
                style="width: 650px; height: 150px; white-space: pre;"
                spellcheck="false" wrap="off" cols="80" rows="10"></textarea>

      <p>
        Additional options:

      <table style="margin-left: 40px;">
        <tr><td>Scale:    <td><input type="text" name="scale"     value="">
        <tr><td>Subsector:<td>
            <select name="subsector">
              <option selected value="">Whole Sector</option>
              <option>A</option>
              <option>B</option>
              <option>C</option>
              <option>D</option>
              <option>E</option>
              <option>F</option>
              <option>G</option>
              <option>H</option>
              <option>I</option>
              <option>J</option>
              <option>K</option>
              <option>L</option>
              <option>M</option>
              <option>N</option>
              <option>O</option>
              <option>P</option>
            </select>
        <tr><td>Rotation: <td>
            <select name="rotation">
              <option value="" selected>None</option>
              <option value="1">90&deg; CW</option>
              <option value="2">180&deg;</option>
              <option value="3">90&deg; CCW</option>
            </select>
        <tr><td>Options:  <td><input type="text" name="options"   value="">
        <tr><td>Hex Numbers:<td>
            <select name="sscoords">
              <option selected=selected>Sector (3240)</option>
              <option value="1">Subsector (0810)</option>
            </select>

        <tr><td>Style:<td>
            <select name="style">
              <option value="poster" selected="selected">Poster</option>
              <option value="print">Print</option>
              <option value="atlas">Atlas</option>
              <option value="candy">Candy</option>
            </select>

        <tr><td>Format:<td>
            <select name="accept">
              <option selected=selected>Bitmap (JPEG or PNG)</option>
              <option value="application/pdf">PDF</option>
            </select>
      </table>

      <input type="submit" value="POST">
    </form>
  </section>

  <section>
    <h3>POST File Attachment</h3>

    <form action="api/poster" method="post" enctype="multipart/form-data" autocomplete="off">
      <ul>
        <li>POST with encoding type "multipart/form-data"
        <li>Sector data is specified as an attachment named "file"
        <li>Options specified in the URL query and/or POST variables
        <li>Content is assumed to be text/plain, but in the future additional content types
          may be supported (e.g. "x-application/x-traveller-sector-v5")
      </ul>

      <div>
        Sector data: <input type="file" name="file">
      </div>

      <ul>
        <li>Metadata in <a href="doc/api.html#metadata">XML</a> (<a href="res/Sectors/FarFrontiers.xml">example</a>)
          or <a href="http://dotclue.org/t20/">MSEC</a> format may optionally be specified as an attachment named "metadata"
      </ul>

      <div>
        Metadata: <input type="file" name="metadata">
      </div>

      <p>
        Additional options:

      <table style="margin-left: 40px;">
        <tr><td>Scale:    <td><input type="text" name="scale"     value="">
        <tr><td>Subsector:<td>
            <select name="subsector">
              <option selected value="">Whole Sector</option>
              <option>A</option>
              <option>B</option>
              <option>C</option>
              <option>D</option>
              <option>E</option>
              <option>F</option>
              <option>G</option>
              <option>H</option>
              <option>I</option>
              <option>J</option>
              <option>K</option>
              <option>L</option>
              <option>M</option>
              <option>N</option>
              <option>O</option>
              <option>P</option>
            </select>
        <tr><td>Rotation: <td>
            <select name="rotation">
              <option value="" selected>None</option>
              <option value="1">90&deg; CW</option>
              <option value="2">180&deg;</option>
              <option value="3">90&deg; CCW</option>
            </select>
        <tr><td>Options:  <td><input type="text" name="options"   value="">
        <tr><td>Hex Numbers:<td>
            <select name="sscoords">
              <option selected=selected>Sector (3240)</option>
              <option value="1">Subsector (0810)</option>
            </select>

        <tr><td>Style:<td>
            <select name="style">
              <option value="poster" selected="selected">Poster</option>
              <option value="print">Print</option>
              <option value="atlas">Atlas</option>
              <option value="candy">Candy</option>
            </select>

        <tr><td>Format:<td>
            <select name="accept">
              <option selected=selected>Bitmap (JPEG or PNG)</option>
              <option value="application/pdf">PDF</option>
            </select>
      </table>

      <input type="submit" value="POST">

    </form>

  </section>

  <section>
    <h3>POST text/plain Content</h3>

    <p>
      This cannot be done through a Web page except via XMLHttpRequest, which doesn't
      make a distinct demo than the examples below. However, it is the simplest format
      for most HTTP clients to work with.


    <ul>
      <li>POST with encoding type "text/plain"
      <li>Sector data is specified the content
      <li>Options specified in the URL query
      <li>Only sector data (.SEC) is supported, not metadata (borders, etc)
    </ul>

  </section>

</div>

<!-- Google Analytics -->
<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-18610679-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

<a href="https://github.com/inexorabletash/travellermap"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>
